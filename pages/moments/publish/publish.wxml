<!--publish.wxml-->
<navigation-bar title="发布朋友圈" back="{{true}}" color="black" background="#FFF9F5" bind:back="goBack"></navigation-bar>

<view class="publish-container">
  <scroll-view class="content-area" scroll-y>
    <!-- 文字输入区 -->
    <view class="input-section">
      <textarea
        class="content-input"
        placeholder="分享新鲜事..."
        placeholder-class="input-placeholder"
        value="{{content}}"
        bindinput="onContentInput"
        maxlength="500"
        auto-height
      />
    </view>

    <!-- 图片网格 -->
    <view class="images-grid">
      <view wx:for="{{images}}" wx:key="index" class="image-item">
        <image class="image-preview" src="{{item}}" mode="aspectFill" bindtap="previewImage" data-url="{{item}}"></image>
        <view class="delete-btn" bindtap="deleteImage" data-index="{{index}}">
          <text class="delete-icon">×</text>
        </view>
      </view>

      <view wx:if="{{images.length < maxImages}}" class="add-image-btn" bindtap="chooseImages">
        <text class="add-icon">+</text>
        <text class="add-text">添加图片</text>
      </view>
    </view>

    <!-- 提示信息 -->
    <view class="tips">
      <text class="tip-text">• 最多可上传9张图片</text>
      <text class="tip-text">• 图片大小不超过5MB</text>
    </view>
  </scroll-view>

  <!-- 发布按钮 -->
  <view class="publish-footer">
    <button class="publish-btn {{uploading ? 'disabled' : ''}}" bindtap="publish" disabled="{{uploading}}">
      <text wx:if="{{!uploading}}">发布</text>
      <text wx:else>发布中...</text>
    </button>
  </view>
</view>
