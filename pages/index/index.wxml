<!--index.wxml-->
<navigation-bar title="å® ç‰©é¡¹åœˆ" back="{{false}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="page-content" scroll-y show-scrollbar="{{false}}">
  <!-- å® ç‰©ä¿¡æ¯å¡ç‰‡ -->
  <view class="pet-card">
    <view class="pet-avatar-wrapper">
      <image class="pet-avatar" src="{{pet.avatar || '/images/pet.png'}}" mode="aspectFill"></image>
      <view class="status-dot"></view>
    </view>
    <view class="pet-info">
      <view class="pet-name">{{pet.name}}</view>
      <view class="pet-status">{{pet.status}}</view>
    </view>
    <view class="battery-info">
      <text class="battery-icon">ğŸ”‹</text>
      <text class="battery-text">{{pet.battery}}%</text>
    </view>
  </view>

  <!-- ä»Šæ—¥æ•°æ® -->
  <view class="section-card" bindtap="goToActivity">
    <view class="section-header">
      <text class="section-title">ä»Šæ—¥æ•°æ®</text>
      <text class="section-more">æŸ¥çœ‹è¯¦æƒ… ></text>
    </view>
    <view class="stats-row">
      <view class="stat-item">
        <text class="stat-value">{{todayStats.calories}}</text>
        <text class="stat-unit">kcal</text>
        <text class="stat-label">æ¶ˆè€—çƒ­é‡</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{todayStats.activeTime}}</text>
        <text class="stat-unit">å°æ—¶</text>
        <text class="stat-label">æ´»è·ƒæ—¶é—´</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{todayStats.steps}}</text>
        <text class="stat-unit">æ­¥</text>
        <text class="stat-label">è¡Œèµ°æ­¥æ•°</text>
      </view>
    </view>
  </view>

  <!-- ç”µæ± çŠ¶æ€ -->
  <view class="section-card" bindtap="goToBattery">
    <view class="section-header">
      <text class="section-title">ç”µæ± çŠ¶æ€</text>
      <text class="section-more">æŸ¥çœ‹è¯¦æƒ… ></text>
    </view>
    <view class="battery-card">
      <view class="battery-main">
        <text class="battery-emoji">ğŸ”‹</text>
        <view class="battery-progress-wrapper">
          <view class="battery-progress-bar">
            <view class="battery-progress-fill" style="width: {{pet.battery}}%"></view>
          </view>
          <view class="battery-labels">
            <text class="battery-percent-text">{{pet.battery}}%</text>
            <text class="battery-estimate">é¢„è®¡ç»­èˆª {{batteryEstimate}} å¤©</text>
          </view>
        </view>
      </view>
      <view class="power-usage">
        <view class="usage-row">
          <text class="usage-name">GPSå®šä½</text>
          <view class="usage-bar">
            <view class="usage-fill blue" style="width: 65%"></view>
          </view>
          <text class="usage-percent">65%</text>
        </view>
        <view class="usage-row">
          <text class="usage-name">ä¼ æ„Ÿå™¨</text>
          <view class="usage-bar">
            <view class="usage-fill orange" style="width: 20%"></view>
          </view>
          <text class="usage-percent">20%</text>
        </view>
      </view>
    </view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½ -->
  <view class="section-card">
    <view class="section-header">
      <text class="section-title">å¿«æ·åŠŸèƒ½</text>
    </view>
    <view class="features-grid">
      <view class="feature-item" wx:for="{{features}}" wx:key="id" bindtap="onFeatureTap" data-url="{{item.url}}">
        <view class="feature-icon" style="background: {{item.color}}">
          <image class="feature-icon-img" src="{{item.icon}}" mode="aspectFit"></image>
        </view>
        <text class="feature-name">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- æœ€æ–°åŠ¨æ€ -->
  <view class="section-card" bindtap="goToMoments">
    <view class="section-header">
      <text class="section-title">æœ€æ–°åŠ¨æ€</text>
      <text class="section-more">æŸ¥çœ‹æ›´å¤š ></text>
    </view>
    <view class="moment-preview">
      <view class="moment-header">
        <image class="moment-avatar" src="{{latestMoment.avatar || '/images/pet.png'}}" mode="aspectFill"></image>
        <view class="moment-info">
          <text class="moment-nickname">{{latestMoment.nickname}}</text>
          <text class="moment-time">{{latestMoment.time}}</text>
        </view>
      </view>
      <text class="moment-content">{{latestMoment.content}}</text>
      <view class="moment-actions">
        <view class="moment-action">
          <image class="action-icon" src="/images/Like.png" mode="aspectFit"></image>
          <text class="action-count">{{latestMoment.likes}}</text>
        </view>
        <view class="moment-action">
          <image class="action-icon" src="/images/Comment.png" mode="aspectFit"></image>
          <text class="action-count">{{latestMoment.comments}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ä»Šæ—¥è®°å½• -->
  <view class="section-card" bindtap="goToDiary">
    <view class="section-header">
      <text class="section-title">ä»Šæ—¥è®°å½•</text>
      <text class="section-more">æŸ¥çœ‹å…¨éƒ¨ ></text>
    </view>
    <view class="diary-list">
      <view class="diary-item" wx:for="{{todayDiary}}" wx:key="id">
        <view class="diary-icon" style="background: {{item.bgColor}}">
          <image class="diary-icon-img" src="{{item.image}}" mode="aspectFit"></image>
        </view>
        <view class="diary-content">
          <text class="diary-title">{{item.title}}</text>
          <text class="diary-desc">{{item.description}}</text>
        </view>
        <text class="diary-time">{{item.time}}</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨é—´è· -->
  <view style="height: 40rpx;"></view>
</scroll-view>
