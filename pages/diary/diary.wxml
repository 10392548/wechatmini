<!--pages/diary/diary.wxml-->
<navigation-bar title="æˆé•¿æ—¥å¿—" back="{{true}}" color="black" background="#FFF"></navigation-bar>

<view class="page-container">
  <!-- æ ‡ç­¾åˆ‡æ¢ -->
  <view class="tabs-wrapper">
    <view class="tabs-card">
      <view
        class="tab-item {{activeTab === 0 ? 'active' : ''}}"
        bindtap="onTabChange"
        data-index="0">
        <text class="tab-text">æ¯æ—¥å›é¡¾</text>
        <view class="tab-indicator" wx:if="{{activeTab === 0}}"></view>
      </view>
      <view
        class="tab-item {{activeTab === 1 ? 'active' : ''}}"
        bindtap="onTabChange"
        data-index="1">
        <text class="tab-text">å¥åº·æŠ¥å‘Š</text>
        <view class="tab-indicator" wx:if="{{activeTab === 1}}"></view>
      </view>
    </view>
  </view>

  <!-- å†…å®¹åŒºåŸŸ -->
  <scroll-view class="content-scroll" scroll-y show-scrollbar="{{false}}" bindrefresherrefresh="onRefresh" refresher-enabled="{{true}}" refresher-triggered="{{refreshing}}">
    <view class="content-inner">

      <!-- æ¯æ—¥å›é¡¾ -->
      <view class="logs-container" wx:if="{{activeTab === 0}}">
        <!-- æ—¥æœŸåˆ†ç»„ -->
        <block wx:if="{{diaryList.length > 0}}">
          <view class="log-item" wx:for="{{diaryList}}" wx:key="id">
            <view class="log-left">
              <view class="log-time-column">
                <text class="log-time">{{item.time}}</text>
              </view>
            </view>
            <view class="log-card">
              <view class="log-icon-wrapper">
                <image class="log-icon" src="{{item.image}}" mode="aspectFit"></image>
              </view>
              <view class="log-content">
                <text class="log-title">{{item.title}}</text>
                <text class="log-desc" wx:if="{{item.description}}">{{item.description}}</text>
              </view>
            </view>
          </view>
        </block>

        <!-- ç©ºçŠ¶æ€ -->
        <view class="empty-container" wx:if="{{diaryList.length === 0 && !loading}}">
          <text class="empty-emoji">ğŸ“</text>
          <text class="empty-title">è¿˜æ²¡æœ‰æˆé•¿è®°å½•</text>
          <text class="empty-desc">ç‚¹å‡»å³ä¸‹è§’æŒ‰é’®è®°å½•ç¬¬ä¸€ä¸ªç¬é—´</text>
        </view>
      </view>

      <!-- å¥åº·æŠ¥å‘Š -->
      <view class="logs-container" wx:if="{{activeTab === 1}}">
        <block wx:if="{{healthReports.length > 0}}">
          <view class="health-item" wx:for="{{healthReports}}" wx:key="id">
            <view class="health-card">
              <view class="health-header">
                <view class="health-icon">
                  <image class="health-icon-img" src="{{item.image}}" mode="aspectFit"></image>
                </view>
                <text class="health-time">{{item.time}}</text>
              </view>
              <text class="health-title">{{item.title}}</text>
              <text class="health-desc" wx:if="{{item.description}}">{{item.description}}</text>
            </view>
          </view>
        </block>

        <!-- ç©ºçŠ¶æ€ -->
        <view class="empty-container" wx:if="{{healthReports.length === 0 && !loading}}">
          <text class="empty-emoji">ğŸ˜´</text>
          <text class="empty-title">æš‚æ— ç¡çœ è®°å½•</text>
          <text class="empty-desc">ç¡çœ æ•°æ®å°†è‡ªåŠ¨åŒæ­¥åˆ°è¿™é‡Œ</text>
        </view>
      </view>

    </view>
  </scroll-view>
</view>

<!-- æµ®åŠ¨åˆ›å»ºæŒ‰é’® -->
<view class="fab" bindtap="onCreateLog">
  <text class="fab-icon">+</text>
  <view class="fab-ring"></view>
</view>
