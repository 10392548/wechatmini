<!--pages/activity/activity.wxml-->
<navigation-bar title="运动轨迹" back="{{true}}" color="black" background="#FFF"></navigation-bar>
<view class="page-content">
  <!-- 地图容器 -->
  <view class="map-container">
    <map
      id="petMap"
      class="map-canvas"
      longitude="{{longitude}}"
      latitude="{{latitude}}"
      scale="{{scale}}"
      markers="{{markers}}"
      polyline="{{polyline}}"
      show-location="{{true}}"
      enable-3D="{{true}}"
      enable-overlooking="{{true}}"
      enable-zoom="{{true}}"
      enable-scroll="{{true}}"
      enable-rotate="{{true}}"
    >
      <cover-view class="map-controls">
        <cover-view class="control-btn" bindtap="centerLocation">
          <cover-image src="/images/location.png" class="control-icon"></cover-image>
        </cover-view>
        <cover-view class="control-btn" bindtap="toggleHeatmap">
          <cover-image src="/images/heatmap.png" class="control-icon"></cover-image>
        </cover-view>
      </cover-view>
    </map>
    <view class="map-info">
      <text class="map-label">运动距离: {{distance}} km</text>
      <text class="map-label">运动时长: {{duration}} 分钟</text>
    </view>
  </view>

  <!-- 当前状态卡片 -->
  <view class="status-card">
    <view class="status-item">
      <text class="status-label">当前状态</text>
      <view class="status-value">
        <image class="status-icon-img" src="/images/{{currentStatus.icon}}.png" mode="aspectFit"></image>
        <text class="status-text">{{currentStatus.text}}</text>
      </view>
    </view>
    <view class="status-divider"></view>
    <view class="status-item">
      <text class="status-label">当前温度</text>
      <view class="status-value">
        <text class="temp-value">{{temperature}}</text>
        <text class="temp-unit">°C</text>
      </view>
    </view>
  </view>

  <!-- 运动统计 -->
  <view class="stats-row">
    <view class="stat-card orange">
      <image class="stat-icon-img" src="/images/Running.png" mode="aspectFit"></image>
      <text class="stat-label">奔跑时长</text>
      <text class="stat-value">{{runningTime}}</text>
      <text class="stat-unit">分钟</text>
    </view>
    <view class="stat-card blue">
      <image class="stat-icon-img" src="/images/Walking.png" mode="aspectFit"></image>
      <text class="stat-label">行走时长</text>
      <text class="stat-value">{{walkingTime}}</text>
      <text class="stat-unit">分钟</text>
    </view>
    <view class="stat-card green">
      <image class="stat-icon-img" src="/images/Still.png" mode="aspectFit"></image>
      <text class="stat-label">静止时长</text>
      <text class="stat-value">{{staticTime}}</text>
      <text class="stat-unit">分钟</text>
    </view>
  </view>

  <!-- 活动详情 -->
  <view class="detail-section">
    <text class="section-title">活动详情</text>
    <view class="detail-list">
      <view class="detail-item" wx:for="{{activityDetails}}" wx:key="time">
        <view class="detail-icon" style="background: {{item.bgColor}}">
          <image class="detail-icon-img" src="/images/{{item.icon}}.png" mode="aspectFit"></image>
        </view>
        <view class="detail-info">
          <text class="detail-name">{{item.name}}</text>
          <text class="detail-time">{{item.time}}</text>
        </view>
        <text class="detail-value">{{item.duration}}</text>
      </view>
    </view>
  </view>
</view>
